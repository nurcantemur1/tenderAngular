{"ast":null,"code":"import { formatDate } from \"@angular/common\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ToastrService } from \"ngx-toastr\";\nimport { ProductService } from \"../services/product.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"../services/product.service\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"@angular/common\";\nfunction ProductAddComponent_small_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 23);\n    i0.ɵɵtext(1, \" \\u00DCr\\u00FCn ad\\u0131 zounludur \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductAddComponent_small_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 23);\n    i0.ɵɵtext(1, \" \\u00DCr\\u00FCn ad\\u0131 en az iki karakter olmal\\u0131d\\u0131r \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ProductAddComponent = /*#__PURE__*/(() => {\n  class ProductAddComponent {\n    // hasBaseDropZoneOver =false;\n    //  photoVisible=false;\n    // files :any;\n    constructor(formBuilder, toastrService, productService, http) {\n      this.formBuilder = formBuilder;\n      this.toastrService = toastrService;\n      this.productService = productService;\n      this.http = http;\n      //  uploader:FileUploader;\n      this.photos = [];\n      this.selectedFile = null;\n    }\n    ngOnInit() {\n      this.createProductAddForm();\n      // this.initializeUploader();\n    }\n\n    createProductAddForm() {\n      this.productAddForm = this.formBuilder.group({\n        name: [\"\", [Validators.required, Validators.minLength(2)]],\n        urunfiyat: [\"\", [Validators.required, Validators.min(0)]],\n        starttime: [\"\", [Validators.required, Validators.minLength(2)]],\n        endtime: [\"\", [Validators.required, Validators.minLength(2)]]\n        // file: [\"\", [Validators.required]],\n      });\n    }\n\n    onFileSelected(event) {\n      this.selectedFile = event.target.files[0];\n    }\n    selectfiles(e) {\n      if (e.target.files) {\n        var reader = new FileReader();\n        reader.readAsDataURL(e.target.files[0]);\n        reader.onload = event => {\n          this.image = event.target.result;\n        };\n      }\n    }\n    onUpload() {\n      const filedata = new FormData();\n      filedata.append('image', this.selectedFile, this.selectedFile.name);\n      this.http.post('http://192.168.1.102:8084/api/photo/addphototo?productId=' + this.product.id, filedata).subscribe(res => {\n        console.log(res);\n      });\n    }\n    add() {\n      this.product = {\n        id: 0,\n        userId: 27,\n        productName: this.productAddForm.value[\"name\"],\n        price: this.productAddForm.value[\"urunfiyat\"],\n        starttime: this.convert(this.productAddForm.value[\"starttime\"]),\n        endprice: this.productAddForm.value[\"urunfiyat\"],\n        endtime: this.convert(this.productAddForm.value[\"endtime\"]),\n        status: false\n      };\n      this.productService.addProduct(this.product).subscribe(response => {\n        if (response) {\n          console.log(response);\n          this.product = response.data;\n          this.toastrService.success(\"Ürün eklendi\", this.product.productName);\n          this.onUpload();\n        } else {\n          this.toastrService.success(\"Eklenemedi\");\n        }\n      });\n    }\n    convert(tarih) {\n      const format = \"dd.MM.yyyy HH:mm:ss\";\n      const locale = \"en-US\";\n      return formatDate(tarih.toString(), format, locale);\n    }\n  }\n  ProductAddComponent.ɵfac = function ProductAddComponent_Factory(t) {\n    return new (t || ProductAddComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i4.HttpClient));\n  };\n  ProductAddComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductAddComponent,\n    selectors: [[\"app-product-add\"]],\n    decls: 37,\n    vars: 4,\n    consts: [[1, \"panel-header\", \"panel-header-sm\"], [1, \"main-content\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-title\"], [1, \"card-body\"], [1, \"table-responsive\"], [3, \"formGroup\"], [1, \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"\\u00DCr\\u00FCn ad\\u0131\", \"formControlName\", \"name\", 1, \"form-control\"], [\"class\", \"form-text text-muted\", 4, \"ngIf\"], [\"for\", \"brand\"], [\"type\", \"file\", 3, \"change\"], [\"for\", \"starttime\"], [\"type\", \"datetime-local\", \"formControlName\", \"starttime\", \"id\", \"starttime\", \"name\", \"starttime\", 1, \"form-control\"], [\"for\", \"endtime\"], [\"type\", \"datetime-local\", \"formControlName\", \"endtime\", \"id\", \"endtime\", \"name\", \"endtime\", 1, \"form-control\"], [\"type\", \"number\", \"placeholder\", \"Fiyat\", \"formControlName\", \"urunfiyat\", 1, \"form-control\"], [1, \"card-footer\", \"row\", \"justify-content-end\"], [1, \"col-2\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"form-text\", \"text-muted\"]],\n    template: function ProductAddComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h4\", 6);\n        i0.ɵɵtext(7, \"\\u00DCr\\u00FCn ekle\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"div\", 8)(10, \"form\", 9)(11, \"div\", 10)(12, \"label\");\n        i0.ɵɵtext(13, \"\\u00DCr\\u00FCn ad\\u0131\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, ProductAddComponent_small_15_Template, 2, 0, \"small\", 12);\n        i0.ɵɵtemplate(16, ProductAddComponent_small_16_Template, 2, 0, \"small\", 12);\n        i0.ɵɵelementStart(17, \"div\", 10)(18, \"label\", 13);\n        i0.ɵɵtext(19, \"Resim Y\\u00FCkle\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"input\", 14);\n        i0.ɵɵlistener(\"change\", function ProductAddComponent_Template_input_change_20_listener($event) {\n          return ctx.onFileSelected($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"div\", 10)(22, \"label\", 15);\n        i0.ɵɵtext(23, \"Yay\\u0131n ba\\u015Flang\\u0131\\u00E7 tarihi:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"input\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 10)(26, \"label\", 17);\n        i0.ɵɵtext(27, \"Yay\\u0131n biti\\u015F tarihi:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"input\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 10)(30, \"label\");\n        i0.ɵɵtext(31, \"Fiyat\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"input\", 19);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(33, \"div\", 20)(34, \"div\", 21)(35, \"button\", 22);\n        i0.ɵɵlistener(\"click\", function ProductAddComponent_Template_button_click_35_listener() {\n          return ctx.add();\n        });\n        i0.ɵɵtext(36, \" Kaydet \");\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n      if (rf & 2) {\n        let tmp_1_0;\n        let tmp_2_0;\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.productAddForm);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.productAddForm.get(\"name\")) == null ? null : tmp_1_0.hasError(\"required\")) && ((tmp_1_0 = ctx.productAddForm.get(\"name\")) == null ? null : tmp_1_0.touched));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.productAddForm.get(\"name\")) == null ? null : tmp_2_0.hasError(\"minlength\")) && ((tmp_2_0 = ctx.productAddForm.get(\"name\")) == null ? null : tmp_2_0.dirty));\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"disabled\", !ctx.productAddForm.valid);\n      }\n    },\n    dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName]\n  });\n  return ProductAddComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}